!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=7)}([function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var n=(i=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[a].concat(o).concat([n]).join("\n")}var i,c,s;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(n[i]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&n[s[0]]||(a&&(s[2]?s[2]="".concat(a," and ").concat(s[2]):s[2]=a),t.push(s))}},t}},function(e,t,a){var r=a(2),n=a(3);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(n,o);e.exports=n.locals||{}},function(e,t,a){"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function c(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function s(e,t){for(var a={},r=[],n=0;n<e.length;n++){var o=e[n],s=t.base?o[0]+t.base:o[0],l=a[s]||0,d="".concat(s," ").concat(l);a[s]=l+1;var h=c(d),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(i[h].references++,i[h].updater(u)):i.push({identifier:d,updater:_(u,t),references:1}),r.push(d)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=a.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var d,h=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,a,r){var n=a?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var o=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function f(e,t,a){var r=a.css,n=a.media,o=a.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var g=null,p=0;function _(e,t){var a,r,n;if(t.singleton){var o=p++;a=g||(g=l(t)),r=u.bind(null,a,o,!1),n=u.bind(null,a,o,!0)}else a=l(t),r=f.bind(null,a,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var a=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<a.length;r++){var n=c(a[r]);i[n].references--}for(var o=s(e,t),l=0;l<a.length;l++){var d=c(a[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}a=o}}}},function(e,t,a){var r=a(0),n=a(4),o=a(5),i=a(6);(t=r(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;500&display=swap);"]),t.i(n);var c=o(i);t.push([e.i,'*,body,:before,:after{margin:0;padding:0;border:0;font-size:100%;font:inherit;color:inherit;box-sizing:border-box}html,body{font-size:2vw}.page-wrapper{width:90vw;margin:0 auto;font-family:"Roboto", sans-serif}.search-form{height:7vh;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.search-form .search__input,.search-form .search__button{border:2px solid var(--search__border--color);font-size:inherit}.search-form .search__input{flex:5;height:100%;padding:0 10px;font-weight:300;border-bottom-left-radius:var(--search__radius-borders);border-top-left-radius:var(--search__radius-borders);background:var(--search__background--color)}.search-form .search__input ::placeholder{color:black}.search-form .search__input:focus{outline:none}.search-form .search__button{flex:1;display:flex;justify-content:center;align-items:center;height:100%;border-bottom-right-radius:var(--search__radius-borders);border-top-right-radius:var(--search__radius-borders)}.search-form .search__button:hover{background:var(--search__border--color)}.search-form .search__button:hover .magnifying-glass{border:0.1em solid white}.search-form .search__button:hover .magnifying-glass:after{background:white}.search-form .pagination{flex:2;height:100%;margin-left:30%;border:4px solid var(--search__border--color);border-radius:10px;display:flex;justify-content:space-between}.search-form .pagination .pagination__select{width:40%;height:100%;display:flex}.search-form .pagination .pagination__page{display:inline-block}.search-form .pagination .change-page{width:30%;height:100%;text-align:center;display:flex;justify-content:center;align-items:center;cursor:pointer}.search-form .pagination .change-page span{max-height:40%;font-size:1rem;margin:0 auto;align-self:center}.search-form .pagination .change-page:hover{color:white;background:var(--search__border--color)}.content{height:90vh;border:3px solid var(--content__border--color)}.loading{width:73vh;height:35vh;padding:10px;margin:0 auto;text-align:center}.loading .loading__image{width:50%;height:55%;display:inline-block;background:url('+c+") no-repeat center/cover}.loading i{font-size:6rem;padding:30px 0}.loading p{margin:4px}.data__cell--content{height:100%}.header,.data__row{display:grid;grid-template-columns:6% 23% 23% 17% 15% 16%}.header{height:var(--row__height--header);color:var(--header__font--color);background:var(--header__background--color);grid-template-rows:100%}.header i{padding:3px;pointer-events:none}.data__cell--header{padding-left:2%;border-bottom:3px solid var(--content__border--color);display:flex;align-items:center;cursor:pointer}.data__cell--header:hover{color:var(--header__background--color);background:var(--header__font--color)}.data{height:var(--data__height)}.data__row{height:var(--row__height--data);color:var(--row__font--color);font-weight:300;grid-template-rows:100%}.data__row:nth-child(2n-1){background:var(--cell__background--1st-color);color:var(--row__font--1st-color)}.data__row:nth-child(2n){background:var(--cell__background--2nd-color);color:var(--row__font--2nd-color)}.data__row .data__cell--content{display:flex;align-items:center;justify-content:center;border-right:1px solid var(--search__border--color)}.data__row .data__cell--content span{margin:auto}.hidden-row{display:none}.data__cell--sorted{background:rgba(168,76,0,0.2)}.active .fa-sort-amount-asc{visibility:visible;transform:scaleY(-1)}.ascending .fa-sort-amount-asc{transform:scaleY(1)}.hidden{visibility:hidden}@media (max-width: 675px){html,body{font-size:3.5vw}.search-form .search__input{flex:4;font-size:1rem}.search-form .search__button{flex:2}.search-form .pagination{flex:3;margin-left:0}.content{width:100vw;height:100vh}.header,.data__row{grid-template-columns:7% 22% 22% 17% 15% 17%}}@media (min-width: 676px) and (max-width: 1025px){.search-form .search__input{flex:5}.search-form .search__button{flex:1}.search-form .pagination{flex:2;margin-left:20%}.header,.data__row{grid-template-columns:7% 23% 23% 17% 15% 16%}.pagination{margin-left:0}}@media (max-width: 1025px){.page-wrapper{width:100vw}.search-form{margin-bottom:0}.loading{width:70%}.loading .loading__image{width:100%}}@media (orientation: landscape){.change-page{font-size:3vh}.pagination__page,.pagination__select{font-size:5vh}.fa{font-size:5vh}.data__cell--content,.data__cell--header{font-size:3vh}}@media (orientation: landscape) and (max-height: 630px){.search-form{height:11vh}.change-page{font-size:7vh}}@media (orientation: portrait){.change-page{font-size:2vw}.pagination__page,.pagination__select{font-size:4vw}.fa{font-size:6vw}.data__cell--content,.data__cell--header{font-size:3vw}}\n",""]),e.exports=t},function(e,t,a){(t=a(0)(!1)).push([e.i,":root {\r\n  /* COLORS */\r\n  --search__border--color: #6930c3;\r\n  --search__background--color: rgb(255, 255, 255);\r\n  --search__button-glass--color: #6930c3;\r\n  --search__radius-borders: 20px;\r\n\r\n  --content__border--color: #7400b8;\r\n\r\n  --header__background--color: #80ffdb;\r\n  --cell__border--color: rgba(255, 255, 255, 1);\r\n  --cell__background--1st-color: #64dfdf;\r\n  --cell__background--2nd-color: #5e60ce;\r\n\r\n  /* font colors */\r\n  --header__font--color: #7400b8;\r\n  --row__font--1st-color: #494bcf;\r\n  --row__font--2nd-color: #bbffff;\r\n\r\n  /* SIZES */\r\n  --row__height--header: 10%;\r\n  --data__height: 90%;\r\n  --row__height--data: 10%;\r\n}\r\n",""]),e.exports=t},function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,a){"use strict";a.r(t),t.default=a.p+"6bba53b547172991062debe15d370dc2.png"},function(e,t,a){"use strict";a.r(t);a(1);const r=e=>{const t=n(e.incomes),a=c("date",!1,e.incomes),r=new Date(a[0].date),o=new Date(r.getFullYear(),r.getMonth());return{totalIncome:t,averageIncome:Number((t/e.incomes.length).toFixed(2)),lastMonthIncomes:n(a.filter(e=>new Date(e.date)>=o))}},n=e=>{const t=e.reduce((e,t)=>e+Number(t.value),0).toFixed(2);return Number(t)},o=async e=>{try{const t=await i(e);return await t.json()}catch(t){throw console.log(`There was an error in fetching ${e}:`),t}},i=e=>{try{return fetch(e)}catch(e){console.log("There was a connection error: ",e)}},c=(e,t,a)=>[...a].sort((a,r)=>a[e]===r[e]?0:a[e]>r[e]?t?1:-1:t?-1:1),s=(e,t=1,a=10)=>{const r=(t-1)*a,n=r+a;return e.slice(r,n)},l=e=>`<option class="pagination__page">\n                ${e+1}\n          </option>`,d=e=>{const t=document.querySelector(".data");t.innerHTML="",e.forEach(e=>{t.insertAdjacentHTML("beforeend",(({id:e,name:t,city:a,totalIncome:r,averageIncome:n,lastMonthIncomes:o})=>`<div data class="data__row">\n                <div class="id data__cell--content">${e}</div>\n                <div class="name data__cell--content">${t}</div>\n                <div class="city data__cell--content">${a}</div>\n                <div class="total-income data__cell--content">${r}</div>\n                <div class="average-income data__cell--content">${n}</div>\n                <div class="last-income data__cell--content">${o}</div>\n            </div>`)(e))})},h=e=>{const t=document.querySelector(".pagination__select");let a=e.length/10,r=a>a.toFixed(0)?Number(a.toFixed(0))+1:a;t.innerHTML="";for(let e=0;e<r;e++)t.insertAdjacentHTML("beforeend",l(e))};class u{constructor(){this.wholeData,this.filteredData,this.pageNumber=1,this.pageSize=10,this.init()}setWholeData(e){this.wholeData=e}getWholeData(){return this.wholeData}setFilteredData(e){this.filteredData=e}getFilteredData(){return this.filteredData}init(){(async()=>{const e=await o("https://recruitment.hal.skygate.io/companies");return Promise.all(e.map(async e=>{const t=await o("https://recruitment.hal.skygate.io/incomes/"+e.id);return{...e,...r(t)}}))})().then(e=>{this.setWholeData(e),this.setFilteredData(e);const t=c("id",!0,this.wholeData),a=s(t);d(a),h(this.getWholeData()),console.log("INIT DATA",this.getWholeData())})}}class f{constructor(){this.cData=new u,this.paginationSelect=document.querySelector(".pagination__select"),this.addEventsListeners()}searchData(e){const t=(a=e,this.cData.getWholeData().filter(e=>Object.values(e).some(e=>String(e).toUpperCase().includes(a.toUpperCase()))));var a;this.cData.setFilteredData(t),d(s(this.cData.getFilteredData()),this.dataRows),h(this.cData.getFilteredData(),this.paginationSelect)}sortData(e,t){const a=c(e,t,this.cData.getFilteredData());this.cData.setFilteredData(a);const r=s(a,this.paginationSelect.value);d(r,this.dataRows)}changePage(e){const t=s(this.cData.getFilteredData(),e);this.paginationSelect.value=e,d(t,this.dataRows)}addEventsListeners(){document.querySelector(".search__button").addEventListener("click",()=>{this.searchData(document.querySelector(".search__input").value)}),document.querySelectorAll("[data-header-id]").forEach(e=>e.addEventListener("click",e=>{const t=e.target.getAttribute("data-header-id"),a=(e=>{if(!1!==e.hasAttribute("data-header-id"))return e.classList.contains("active")||(document.querySelector(".active").classList.remove("ascending"),document.querySelector(".active").classList.remove("active"),e.classList.add("active")),e.classList.toggle("ascending")})(e.target);this.sortData(t,a)})),document.querySelector(".previous-page").addEventListener("click",()=>{this.paginationSelect.value>1&&this.changePage(Number(this.paginationSelect.value)-1)}),document.querySelector(".next-page").addEventListener("click",()=>{this.paginationSelect.value<this.paginationSelect.length&&this.changePage(Number(this.paginationSelect.value)+1)}),this.paginationSelect.addEventListener("change",e=>{this.changePage(Number(e.target.value))})}}window.addEventListener("DOMContentLoaded",()=>new f)}]);